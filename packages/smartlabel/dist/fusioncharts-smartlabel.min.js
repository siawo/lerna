!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.SmartlabelManager=t()}}(function(){return function t(e,i,n){function s(o,h){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!h&&a)return a(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var i=e[o][1][t];return s(i?i:t)},d,d.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,e,i,n){var r,o,h,f,g=!1,p=s.store;if("undefined"!=typeof t&&"object"!=typeof t){(f=p[t])&&f.dispose(),p[t]=this,n=n||{},n.maxCacheLimit=isFinite(h=n.maxCacheLimit)?h:l.maxDefaultCacheLimit,"string"==typeof e&&(e=d.getElementById(e)),r=l.createContainer(e),r.innerHTML=l.testStrAvg,!x.isHeadLess&&(x.isIE||r.offsetHeight||r.offsetWidth)||(g=!0),r.innerHTML="";for(o in l.parentContainerStyle)r.style[o]=l.parentContainerStyle[o];this.id=t,this.parentContainer=r,this._containerManager=new a["default"](r,g,10),this._showNoEllipses=!i,this._init=!0,this.style={},this.options=n,this.setStyle()}}Object.defineProperty(i,"__esModule",{value:!0});var r=t("./lib"),o=n(r),h=t("./container-manager"),a=n(h),l=o["default"].init("undefined"!=typeof window?window:void 0),d=l.win.document,f=l.win.Math,g=f.max,p=f.round,c="",u={" ":"&nbsp;"},x=l.getDocumentSupport(),w=x.isWebKit?0:4.5;s.textToLines=function(t){return t=t||{},t.text?"string"!=typeof t.text&&(t.text=t.text.toString()):t.text="",t.lines=t.text.split(/\n|<br\s*?\/?>/gi),t},s.store={},s.prototype._calCharDimWithCache=function(t,e,i){if(!this._init)return!1;var n,s,r,o,h,a,l=this.options.maxCacheLimit,d=this._container,f=this.style||{},g=this._advancedCache||(this._advancedCache={}),p=this._advancedCacheKey||(this._advancedCacheKey=[]),x=t+(f.fontSize||c)+(f.fontFamily||c)+(f.fontWeight||c)+(f.fontStyle||c),w=t+"init"+(f.fontSize||c)+(f.fontFamily||c)+(f.fontWeight||c)+(f.fontStyle||c);return u[t]&&(t=u[t]),e?void 0===(a=g[w])&&(d.innerHTML=t.repeat?t.repeat(i):Array(i+1).join(t),r=d.offsetWidth,d.innerHTML=t,o=d.offsetWidth,a=g[w]=(r-i*o)/(i+1),p.push(w),p.length>l&&delete g[p.shift()]):a=0,(h=g[x])?(s=h.split(","),{width:parseFloat(s[0],10),height:parseFloat(s[1],10)}):(d.innerHTML=t,n={height:d.offsetHeight,width:d.offsetWidth+a},g[x]=n.width+","+n.height,p.push(x),p.length>l&&delete g[p.shift()],n)},s.prototype._getWidthFn=function(){var t=this._containerObj,e=this._container,i=t.svgText;return i?function(t){var e,n;return i.textContent=t,e=i.getBBox(),n=e.width-w,n<1&&(n=e.width),n}:function(t){return e.innerHTML=t,e.offsetWidth}},s.prototype.setStyle=function(t){if(!this._init)return this;var e;if(t!==this.style||this._styleNotSet)return t||(t=this.style),l.setLineHeight(t),this.style=t,this._containerObj=e=this._containerManager.get(t),this._containerObj?(this._container=e.node,this._context=e.context,this._cache=e.charCache,this._lineHeight=e.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0,this},s.prototype.useEllipsesOnOverflow=function(t){return this._init?(this._showNoEllipses=!t,this):this},s.prototype.getSmartText=function(t,e,i,n){if(!this._init)return!1;void 0===t||null===t?t="":"string"!=typeof t&&(t=t.toString());var s,r,o,h,a,f,p,c,u,w,m,v,y,_,b,T,C,H,W,N,S,L,M,R,E,B,A=!1,j=0,O=-1,I=-1,F=-1,z=0,D=0,k=[],K=0,V=this._showNoEllipses?"":"...",$=this._lineHeight,q=this._context,G=this._container,U=this._containerObj,P=U.ellipsesWidth,J=U.dotWidth,Q=[],X=-1,Y=-1,Z=-1,tt=function(t){t=t.replace(/^\s\s*/,"");for(var e=/\s/,i=t.length;e.test(t.charAt(i-=1)););return t.slice(0,i+1)},et={text:t,maxWidth:e,maxHeight:i,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:t,isTruncated:!1};if(v=this._getWidthFn(),i===$&&(i*=1.2),G){if(!x.isBrowserLess){if(A=l.xmlTagRegEx.test(t),A?(G.innerHTML=t,et.oriTextWidth=p=G.offsetWidth,et.oriTextHeight=c=G.offsetHeight):(h=t.replace(l.ltgtRegex,function(t){return"&lt;"===t?"<":">"}),b=this.getOriSize(h,!0),et.oriTextWidth=p=b.width,et.oriTextHeight=c=b.height),c<=i&&p<=e)return et.width=et.oriTextWidth=p,et.height=et.oriTextHeight=c,et;if($>i)return et.text="",et.width=et.oriTextWidth=0,et.height=et.oriTextHeight=0,et}if(t=tt(t).replace(/(\s+)/g," "),a=this._showNoEllipses?e:e-P,!A){if(k=t.split(""),s=k.length,r="",o=[],m=k[0],this._cache[m]?W=this._cache[m].width:(W=v(m),this._cache[m]={width:W}),a>W)o=t.substr(0,l.getNearestBreakIndex(t,a,this)).split(""),K=o.length;else{if(W>e)return et.text="",et.width=et.oriTextWidth=et.height=et.oriTextHeight=0,et;V&&(a=e-2*J,a>W?V="..":(a=e-J,a>W?V=".":(a=0,V="")))}if(z=v(o.join("")),D=this._lineHeight,n){for(;K<s;K+=1)if(m=o[K]=k[K],this._cache[m]?W=this._cache[m].width:(b&&(W=b.detailObj[m])||(W=v(m)),this._cache[m]={width:W}),z+=W,z>a&&(r||(r=o.slice(0,-1).join("")),z>e))return et.text=tt(r)+V,et.tooltext=et.oriText,et.width=v(et.text),et.height=this._lineHeight,et;return et.text=o.join(""),et.width=z,et.height=this._lineHeight,et}for(;K<s;K+=1)if(m=o[K]=k[K]," "!==m||q||(m="&nbsp;"),this._cache[m]?W=this._cache[m].width:(b&&(W=b.detailObj[m])||(W=v(m)),this._cache[m]={width:W}),z+=W,z>a&&(r||(r=o.slice(0,-1).join("")),z>e)){if(I=t.substr(0,o.length).lastIndexOf(" "),O=t.substr(0,o.length).lastIndexOf("-"),I>F?(z=v(o.slice(F+1,I).join("")),o.splice(I,1,"<br/>"),F=I,u=I+1):O>F?(O===o.length-1?(z=v(o.slice(F+1,I).join("")),o.splice(O,1,"<br/>-")):(z=v(o.slice(F+1,I).join("")),o.splice(O,1,"-<br/>")),F=O,u=O+1):(o.splice(o.length-1,1,"<br/>"+k[K]),Z=o.length-2,z=v(o.slice(F+1,Z+1).join("")),F=Z,u=K),D+=this._lineHeight,D>i)return et.text=tt(r)+V,et.tooltext=et.oriText,et.width=e,et.height=D-this._lineHeight,et;j=g(j,z),r=null,w=l.getNearestBreakIndex(t.substr(u),a,this),z=v(t.substr(u,w||1)),o.length<u+w&&(o=o.concat(t.substr(o.length,u+w-o.length).split("")),K=o.length-1)}return j=g(j,z),et.text=o.join(""),et.width=j,et.height=D,et}for(f=t.replace(l.spanAdditionRegx,"$2"),t=t.replace(l.spanAdditionRegx,l.spanAdditionReplacer),t=t.replace(/(<br\s*\/*\>)/g,'<span class="'+[l.classNameWithTag," ",l.classNameWithTagBR].join("")+'">$1</span>'),G.innerHTML=t,T=G[x.childRetriverFn](x.childRetriverString),C=0,H=T.length;C<H;C+=1)N=T[C],(x.noClassTesting||l.classNameReg.test(N.className))&&(S=N.innerHTML,""!==S&&(" "===S?Y=Q.length:"-"===S&&(X=Q.length),Q.push({spaceIdx:Y,dashIdx:X,elem:N}),k.push(S)));if(K=0,s=Q.length,W=Q[0].elem.offsetWidth,W>e)return et.text="",et.width=et.oriTextWidth=et.height=et.oriTextHeight=0,et;if(W>a&&!this._showNoEllipses&&(a=e-2*J,a>W?V="..":(a=e-J,a>W?V=".":(a=0,V=""))),y=Q[0].elem.offsetLeft,_=Q[0].elem.offsetTop,n)for(;K<s;K+=1)N=Q[K].elem,L=N.offsetLeft-y+N.offsetWidth,L>a&&(B||(B=K),G.offsetWidth>e&&(E=K,K=s));else for(;K<s;K+=1)N=Q[K].elem,M=N.offsetHeight+(N.offsetTop-_),L=N.offsetLeft-y+N.offsetWidth,R=null,L>a?(B||(B=K),L>e&&(I=Q[K].spaceIdx,O=Q[K].dashIdx,I>F?(Q[I].elem.innerHTML="<br/>",F=I):O>F?(O===K?Q[O].elem.innerHTML="<br/>-":Q[O].elem.innerHTML="-<br/>",F=O):N.parentNode.insertBefore(R=d.createElement("br"),N),N.offsetHeight+N.offsetTop>i?(R?R.parentNode.removeChild(R):F===O?Q[O].elem.innerHTML="-":Q[I].elem.innerHTML=" ",E=K,K=s):B=null)):M>i&&(E=K,K=s);if(E<s){for(et.isTruncated=!0,B=B?B:E,K=s-1;K>=B;K-=1)N=Q[K].elem,N.parentNode.removeChild(N);for(;K>=0;K-=1)N=Q[K].elem,l.classNameBrReg.test(N.className)?N.parentNode.removeChild(N):K=0}return et.text=G.innerHTML.replace(l.spanRemovalRegx,"$1").replace(/\&amp\;/g,"&"),et.isTruncated&&(et.text+=V,et.tooltext=f),et.height=G.offsetHeight,et.width=G.offsetWidth,et}return et.error=new Error("Body Tag Missing!"),et},s.prototype.getOriSize=function(t,e){if(!this._init)return!1;var i,n,s,r,o,h=0,a=0,l={};if(!e)return this._calCharDimWithCache(t);for(i=t.split(""),r=0,o=i.length;r<o;r++)n=i[r],s=this._calCharDimWithCache(n,!0,i.length),a=g(a,s.height),h+=s.width,l[n]=s.width;return{width:p(h),height:a,detailObj:l}},s.prototype.dispose=function(){return this._init?(this._containerManager&&this._containerManager.dispose&&this._containerManager.dispose(),delete this._container,delete this._context,delete this._cache,delete this._containerManager,delete this._containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this._showNoEllipses,this):this},i["default"]=s,e.exports=i["default"]},{"./container-manager":2,"./lib":3}],2:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,e,i){var n;i=i>5?i:5,i=i<20?i:20,this.maxContainers=i,this.first=null,this.last=null,this.containers={},this.length=0,this.rootNode=t,e&&(n=a.createElementNS("http://www.w3.org/2000/svg","svg"),n.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),n.setAttributeNS("http://www.w3.org/2000/svg","height","0"),n.setAttributeNS("http://www.w3.org/2000/svg","width","0"),this.svgRoot=n,this.rootNode.appendChild(n))}var r=t("./lib"),o=n(r),h=o["default"].init("undefined"!=typeof window?window:void 0),a=h.win.document,l=h.getDocumentSupport(),d=l.isWebKit?0:4.5;s.prototype.get=function(t){var e,i,n,s=this.containers,r=this.length,o=this.maxContainers,a="";for(i in h.supportedStyle)void 0!==t[i]&&(a+=h.supportedStyle[i]+":"+t[i]+";");if(!a)return!1;if(n=s[a])this.first!==n&&(n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n.next=this.first,n.next.prev=n,this.last===n&&(this.last=n.prev),n.prev=null,this.first=n);else{if(r>=o)for(e=r-o+1;e--;)this.removeContainer(this.last);n=this.addContainer(a)}return n},s.prototype.addContainer=function(t){var e,i;return this.containers[t]=i={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:t,charCache:{}},i.next=this.first,i.next&&(i.next.prev=i),this.first=i,this.last||(this.last=i),this.length+=1,e=i.node=a.createElement("div"),this.rootNode.appendChild(e),l.isIE&&!l.hasSVG?e.style.setAttribute("cssText",t):e.setAttribute("style",t),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),e.style.display="inline-block",e.innerHTML=h.testStrAvg,i.lineHeight=e.offsetHeight,i.avgCharWidth=e.offsetWidth/3,l.isBrowserLess?(e=i.svgText=a.createElementNS("http://www.w3.org/2000/svg","text"),e.setAttribute("style",t),this.svgRoot.appendChild(e),e.textContent=h.testStrAvg,i.lineHeight=e.getBBox().height,i.avgCharWidth=(e.getBBox().width-d)/3,e.textContent="...",i.ellipsesWidth=e.getBBox().width-d,e.textContent=".",i.dotWidth=e.getBBox().width-d):(e.innerHTML="...",i.ellipsesWidth=e.offsetWidth,e.innerHTML=".",i.dotWidth=e.offsetWidth,e.innerHTML=""),i},s.prototype.removeContainer=function(t){var e=t.keyStr;e&&this.length&&t&&(this.length-=1,t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev),t.node.parentNode.removeChild(t.node),delete this.containers[e])},s.prototype.dispose=function(){var t,e=this.containers;this.maxContainers=null;for(t in e)this.removeContainer(e[t]);this.rootNode.parentNode.removeChild(this.rootNode),this.rootNode=null,this.first=null,this.last=null},e.exports=s},{"./lib":3}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={init:function(t){var e=t.document,i=t.navigator,s=i.userAgent,r="DIV",o=Math.ceil,h=Math.floor,a=0,l="fusioncharts-smartlabel-",d=l+"container",f=l+"tag",g=l+"br";return n={win:t,containerClass:d,classNameWithTag:f,classNameWithTagBR:g,maxDefaultCacheLimit:500,classNameReg:new RegExp("\b"+f+"\b"),classNameBrReg:new RegExp("\b"+g+"\b"),spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+f+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+f+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),ltgtRegex:/&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function(){var i,n,r;return e.getElementsByClassName?(i="getElementsByClassName",n=f,r=!0):(i="getElementsByTagName",n="span",r=!1),{isIE:/msie/i.test(s)&&!t.opera,hasSVG:Boolean(t.SVGAngle||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(s),isWebKit:new RegExp(" AppleWebKit/").test(s),childRetriverFn:i,childRetriverString:n,noClassTesting:r}},createContainer:function(t){var i,n;if(t&&(t.offsetWidth||t.offsetHeight)){if(t.appendChild)return t.appendChild(n=e.createElement(r)),n.className=d,n.setAttribute("aria-hidden","true"),n.setAttribute("role","presentation"),n}else if(i=e.getElementsByTagName("body")[0],i&&i.appendChild)return n=e.createElement(r),n.className=d,n.setAttribute("aria-hidden","true"),n.setAttribute("role","presentation"),a+=1,i.appendChild(n),n},getNearestBreakIndex:function(t,e,i){if(!t||!t.length)return 0;var n,s=i._getWidthFn(),r=0,a=0,l=s(t),d=l/t.length;if(n=e,r=o(e/d),l<e)return t.length-1;for(r>t.length&&(n=e-l,r=t.length);n>0;){if(n=e-s(t.substr(0,r)),a=h(n/d),!a)return r;r+=a}for(;n<0;){if(n=e-s(t.substr(0,r)),a=h(n/d),!a)return r;r+=a}return r},setLineHeight:function(t){var e=t.fontSize=t.fontSize||"12px";return t.lineHeight=t.lineHeight||t["line-height"]||1.2*parseInt(e,10)+"px",t}}}};i["default"]=n,e.exports=i["default"]},{}]},{},[1])(1)});