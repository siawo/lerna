!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.SmartlabelManager=t()}}(function(){return function t(e,i,n){function r(o,h){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!h&&a)return a(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var i=e[o][1][t];return r(i?i:t)},d,d.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i){var n,r,s,o=!1,h=window.document.createElement("canvas");i=i||{},i.maxCacheLimit=isFinite(s=i.maxCacheLimit)?s:l.maxDefaultCacheLimit,"string"==typeof t&&(t=d.getElementById(t)),n=l.createContainer(t),n.innerHTML=l.testStrAvg,!x.isHeadLess&&(x.isIE||n.offsetHeight||n.offsetWidth)||(o=!0),n.innerHTML="";for(r in l.parentContainerStyle)n.style[r]=l.parentContainerStyle[r];this.parentContainer=n,this.ctx=h&&h.getContext&&h.getContext("2d"),this._getDimention=this.ctx?l._getDimentionUsingCanvas:l._getDimentionUsingDiv,this._containerManager=new a["default"](n,o,10),this._showNoEllipses=!e,this._init=!0,this.style={},this.oldStyle=1,this.options=i,this.setStyle()}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./lib"),o=n(s),h=t("./container-manager"),a=n(h),l=o["default"].init("undefined"!=typeof window?window:void 0),d=l.win.document,g=l.win.Math,f=g.max,c=g.round,u="",p={" ":"&nbsp;"},x=l.getDocumentSupport(),m=x.isWebKit?0:4.5;r.textToLines=function(t){return t=t||{},t.text?"string"!=typeof t.text&&(t.text=t.text.toString()):t.text="",t.lines=t.text.split(/\n|<br\s*?\/?>/gi),t},r.prototype._calCharDimWithCache=function(t,e,i){if(void 0===t&&(t=""),!this._init)return!1;var n,r,s,o,h,a,l,d,g,f,c=this.options.maxCacheLimit,x=this.style||{};return l=this._advancedCache=this._advancedCache||(this._advancedCache={}),d=this._advancedCacheKey||(this._advancedCacheKey=[]),g=t+(x.fontSize||u)+(x.fontFamily||u)+(x.fontWeight||u)+(x.fontStyle||u),f=t+"init"+(x.fontSize||u)+(x.fontFamily||u)+(x.fontWeight||u)+(x.fontStyle||u),!this.ctx&&p[t]&&(t=p[t]),e?void 0===(a=l[f])&&(s=this._getDimention(t.repeat?t.repeat(i):Array(i+1).join(t)).width,o=this._getDimention(t).width,a=l[f]=(s-i*o)/(i+1),d.push(f),d.length>c&&delete l[d.shift()]):a=0,(h=l[g])?(r=h.split(","),{width:parseFloat(r[0],10),height:parseFloat(r[1],10)}):(n=this._getDimention(t),n.width+=a,l[g]=n.width+","+n.height,d.push(g),d.length>c&&delete l[d.shift()],n)},r.prototype._getWidthFn=function(){var t=this,e=t._containerObj,i=e.svgText;return i?function(t){var e,n;return i.textContent=t,e=i.getBBox(),n=e.width-m,n<1&&(n=e.width),n}:function(e){return t._getDimention(e).width}},r.prototype._setStyleOfCanvas=function(){if(this.style!==this.oldStyle){var t,e=this,i=e.style,n=i.fontStyle||i["font-style"]||"normal",r=i.fontVariant||i["font-variant"]||"normal",s=i.fontWeight||i["font-weight"]||"normal",o=i.fontSize||i["font-size"]||"12px",h=i.fontFamily||i["font-family"]||"Verdana,sans";o+=o.indexOf("px")===-1?"px":"",e.ctx.font=n+" "+r+" "+s+" "+o+" "+h,t=this._containerObj=this._containerManager.get(i),this._containerObj?(this._container=t.node,this._context=t.context,this._cache=t.charCache,this._lineHeight=t.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0,t.ellipsesWidth=e.ctx.measureText("...").width,t.dotWidth=e.ctx.measureText(".").width,t.lineHeight=this._lineHeight=t.lineHeight||l._getCleanHeight(i.lineHeight),this.oldStyle=i}},r.prototype._setStyleOfDiv=function(){var t,e=this.style;this._containerObj=t=this._containerManager.get(e),!t.node&&this._containerManager._makeDivNode(this._containerObj),this._containerObj?(this._container=t.node,this._context=t.context,this._cache=t.charCache,this._lineHeight=t.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0},r.prototype._updateStyle=function(t){return t||!this.ctx?this._setStyleOfDiv():this._setStyleOfCanvas()},r.prototype.setStyle=function(t){t&&(this.style=t,l.setLineHeight(t))},r.prototype.useEllipsesOnOverflow=function(t){return this._init?(this._showNoEllipses=!t,this):this},r.prototype.getSmartText=function(t,e,i,n){if(!this._init)return!1;void 0===t||null===t?t="":"string"!=typeof t&&(t=t.toString());var r,s,o,h,a,g,c,u,p,m,v,_,w,y,b,T,C,H,S,W,N,R,M,L,E,O,B,A,j,D,I,F,z,k,U=!1,V=0,K=-1,q=-1,$=-1,G=0,P=0,J=[],Q=0,X=this._showNoEllipses?"":"...",Y=this.ctx,Z=[],tt=-1,et=-1,it=-1,nt=function(t){t=t.replace(/^\s\s*/,"");for(var e=/\s/,i=t.length;e.test(t.charAt(i-=1)););return t.slice(0,i+1)},rt={text:t,maxWidth:e,maxHeight:i,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:t,isTruncated:!1};if(U=l.xmlTagRegEx.test(t),z=l._hasOnlyBRTag(t),this._updateStyle(U&&!z),B=this._lineHeight,A=this._context,j=this._container,D=this._containerObj,I=D.ellipsesWidth,F=D.dotWidth,_=this._getWidthFn(),i===B&&(i*=1.2),Y||j){if(!x.isBrowserLess){if(U?z?(t=t.replace(l.brRegex,"<br />"),k=l._getDimentionOfMultiLineText(t,this),rt.oriTextWidth=c=k.width,rt.oriTextHeight=u=k.height):(j.innerHTML=t,rt.oriTextWidth=c=j.offsetWidth,rt.oriTextHeight=u=j.offsetHeight):(h=t.replace(l.ltgtRegex,function(t){return"&lt;"===t?"<":">"}),b=this.getOriSize(h,!0,{hasHTMLTag:U,hasOnlyBrTag:z,cleanText:!0}),rt.oriTextWidth=c=b.width,rt.oriTextHeight=u=b.height),u<=i&&c<=e)return rt.width=rt.oriTextWidth=c,rt.height=rt.oriTextHeight=u,rt;if(B>i)return rt.text="",rt.width=rt.oriTextWidth=0,rt.height=rt.oriTextHeight=0,rt}if(t=nt(t).replace(/(\s+)/g," "),a=this._showNoEllipses?e:e-I,!U||z){if(J=l._getTextArray(t),r=J.length,s="",o=[],v=J[0],this._cache[v]?S=this._cache[v].width:(S=_(v),this._cache[v]={width:S}),a>S&&!z)o=t.substr(0,l.getNearestBreakIndex(t,a,this)).split("");else{if(S>e)return rt.text="",rt.width=rt.oriTextWidth=rt.height=rt.oriTextHeight=0,rt;X&&(a=e-2*F,a>S?X="..":(a=e-F,a>S?X=".":(a=0,X="")))}if(Q=o.length,G=_(o.join("")),P=this._lineHeight,n){for(;Q<r;Q+=1)if(v=o[Q]=J[Q],"<br />"!==o[Q]){if(this._cache[v]?S=this._cache[v].width:(b&&(S=b.detailObj[v])||(S=_(v)),this._cache[v]={width:S}),G+=S,G>a&&(s||(s=o.slice(0,-1).join("")),G>e))return rt.text=nt(s)+X,rt.tooltext=rt.oriText,rt.width=f(V,G),rt.height=P,rt}else P+=this._lineHeight,$=Q,V=f(V,G),G=0,s=null;return rt.text=o.join(""),rt.width=f(V,G),rt.height=P,rt}for(;Q<r;Q+=1)if(v=o[Q]=J[Q]," "!==v||A||(v=this.ctx?" ":"&nbsp;"),"<br />"!==o[Q]){if(this._cache[v]?S=this._cache[v].width:(b&&(S=b.detailObj[v])||(S=_(v)),this._cache[v]={width:S}),G+=S,G>a&&(s||(s=o.slice(0,-1).join("")),G>e)){if(q=l._findLastIndex(J.slice(0,o.length)," "),K=l._findLastIndex(J.slice(0,o.length),"-"),q>$?(G=_(o.slice($+1,q).join("")),o.splice(q,1,"<br/>"),$=q,p=q+1):K>$?(K===o.length-1?(G=_(o.slice($+1,q).join("")),o.splice(K,1,"<br/>-")):(G=_(o.slice($+1,q).join("")),o.splice(K,1,"-<br/>")),$=K,p=K+1):(o.splice(o.length-1,1,"<br/>"+J[Q]),it=o.length-2,G=_(o.slice($+1,it+1).join("")),$=it,p=Q),P+=this._lineHeight,P>i)return rt.text=nt(s)+X,rt.tooltext=rt.oriText,rt.width=e,rt.height=P-this._lineHeight,rt;V=f(V,G),s=null,z?G=0:(m=l.getNearestBreakIndex(t.substr(p),a,this),G=_(t.substr(p,m||1)),o.length<p+m&&(o=o.concat(t.substr(o.length,p+m-o.length).split("")),Q=o.length-1))}}else P+=this._lineHeight,$=Q,V=f(V,G),G=0,s=null;return V=f(V,G),rt.text=o.join(""),rt.width=V,rt.height=P,rt}for(g=t.replace(l.spanAdditionRegx,"$2"),t=t.replace(l.spanAdditionRegx,l.spanAdditionReplacer),t=t.replace(/(<br\s*\/*\>)/g,'<span class="'+[l.classNameWithTag," ",l.classNameWithTagBR].join("")+'">$1</span>'),j.innerHTML=t,T=j[x.childRetriverFn](x.childRetriverString),C=0,H=T.length;C<H;C+=1)W=T[C],(x.noClassTesting||l.classNameReg.test(W.className))&&(N=W.innerHTML,""!==N&&(" "===N?et=Z.length:"-"===N&&(tt=Z.length),Z.push({spaceIdx:et,dashIdx:tt,elem:W}),J.push(N)));if(Q=0,r=Z.length,S=Z[0].elem.offsetWidth,S>e)return rt.text="",rt.width=rt.oriTextWidth=rt.height=rt.oriTextHeight=0,rt;if(S>a&&!this._showNoEllipses&&(a=e-2*F,a>S?X="..":(a=e-F,a>S?X=".":(a=0,X=""))),w=Z[0].elem.offsetLeft,y=Z[0].elem.offsetTop,n)for(;Q<r;Q+=1)W=Z[Q].elem,R=W.offsetLeft-w+W.offsetWidth,R>a&&(O||(O=Q),j.offsetWidth>e&&(E=Q,Q=r));else for(;Q<r;Q+=1)W=Z[Q].elem,M=W.offsetHeight+(W.offsetTop-y),R=W.offsetLeft-w+W.offsetWidth,L=null,R>a?(O||(O=Q),R>e&&(q=Z[Q].spaceIdx,K=Z[Q].dashIdx,q>$?(Z[q].elem.innerHTML="<br/>",$=q):K>$?(K===Q?Z[K].elem.innerHTML="<br/>-":Z[K].elem.innerHTML="-<br/>",$=K):W.parentNode.insertBefore(L=d.createElement("br"),W),W.offsetHeight+W.offsetTop>i?(L?L.parentNode.removeChild(L):$===K?Z[K].elem.innerHTML="-":Z[q].elem.innerHTML=" ",E=Q,Q=r):O=null)):M>i&&(E=Q,Q=r);if(E<r){for(rt.isTruncated=!0,O=O?O:E,Q=r-1;Q>=O;Q-=1)W=Z[Q].elem,W.parentNode.removeChild(W);for(;Q>=0;Q-=1)W=Z[Q].elem,l.classNameBrReg.test(W.className)?W.parentNode.removeChild(W):Q=0}return rt.text=j.innerHTML.replace(l.spanRemovalRegx,"$1").replace(/\&amp\;/g,"&"),rt.isTruncated&&(rt.text+=X,rt.tooltext=g),rt.height=j.offsetHeight,rt.width=j.offsetWidth,rt}return rt.error=new Error("Body Tag Missing!"),rt},r.prototype.getOriSize=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=arguments.length<=1||void 0===arguments[1]||arguments[1],i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!this._init)return!1;var n,r,s,o,h,a,d=0,g=0,u={},p=i.hasHTMLTag,x=i.hasOnlyBrTag;if("undefined"==typeof p&&(p=l.xmlTagRegEx.test(t)),"undefined"==typeof x&&(x=l._hasOnlyBRTag(t)),i.cleanText||(t=t.replace(l.ltgtRegex,function(t){return"&lt;"===t?"<":">"})),this._updateStyle(p&&!x),a=this._container,x)return l._getDimentionOfMultiLineText(t,this);if(!e)return this._calCharDimWithCache(t);if(p)return a.innerHTML=t,{width:a.offsetWidth,height:a.offsetHeight};for(n=t.split(""),o=0,h=n.length;o<h;o++)r=n[o],s=this._calCharDimWithCache(r,!0,n.length),g=f(g,s.height),d+=s.width,u[r]=s.width;return{width:c(d),height:g,detailObj:u}},r.prototype.dispose=function(){return this._init?(this._containerManager&&this._containerManager.dispose&&this._containerManager.dispose(),delete this._container,delete this._context,delete this._cache,delete this._containerManager,delete this._containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this._showNoEllipses,this):this},i["default"]=r,e.exports=i["default"]},{"./container-manager":2,"./lib":3}],2:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i){var n;i=i>5?i:5,i=i<20?i:20,this.maxContainers=i,this.first=null,this.last=null,this.containers={},this.length=0,this.rootNode=t,e&&(n=a.createElementNS("http://www.w3.org/2000/svg","svg"),n.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),n.setAttributeNS("http://www.w3.org/2000/svg","height","0"),n.setAttributeNS("http://www.w3.org/2000/svg","width","0"),this.svgRoot=n,this.rootNode.appendChild(n))}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./lib"),o=n(s),h=o["default"].init("undefined"!=typeof window?window:void 0),a=h.win.document,l=h.getDocumentSupport(),d=l.isWebKit?0:4.5;r.prototype.get=function(t){var e,i,n,r=this.containers,s=this.length,o=this.maxContainers,a="";for(i in h.supportedStyle)void 0!==t[i]&&(a+=h.supportedStyle[i]+":"+t[i]+";");if(!a)return!1;if(n=r[a])this.first!==n&&(n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n.next=this.first,n.next.prev=n,this.last===n&&(this.last=n.prev),n.prev=null,this.first=n);else{if(s>=o)for(e=s-o+1;e--;)this.removeContainer(this.last);n=this.addContainer(a)}return n},r.prototype._makeDivNode=function(t,e){var i;t.node||(t.node=a.createElement("div"),this.rootNode.appendChild(t.node)),i=t.node,l.isIE&&!l.hasSVG?i.style.setAttribute("cssText",e):i.setAttribute("style",e),i.setAttribute("aria-hidden","true"),i.setAttribute("role","presentation"),i.style.display="inline-block",i.innerHTML=h.testStrAvg,t.lineHeight=i.offsetHeight,t.avgCharWidth=i.offsetWidth/3,l.isBrowserLess?(t.svgText||(t.svgText=a.createElementNS("http://www.w3.org/2000/svg","text"),this.svgRoot.appendChild(i)),i=t.svgText,i.setAttribute("style",e),i.textContent=h.testStrAvg,t.lineHeight=i.getBBox().height,t.avgCharWidth=(i.getBBox().width-d)/3,i.textContent="...",t.ellipsesWidth=i.getBBox().width-d,i.textContent=".",t.dotWidth=i.getBBox().width-d):(i.innerHTML="...",t.ellipsesWidth=i.offsetWidth,i.innerHTML=".",t.dotWidth=i.offsetWidth,i.innerHTML="")},r.prototype.addContainer=function(t){var e;return this.containers[t]=e={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:t,charCache:{}},e.next=this.first,e.next&&(e.next.prev=e),this.first=e,this.last||(this.last=e),this.length+=1,e},r.prototype.removeContainer=function(t){var e=t.keyStr;e&&this.length&&t&&(this.length-=1,t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev),t.node&&t.node.parentNode.removeChild(t.node),delete this.containers[e])},r.prototype.dispose=function(){var t,e=this.containers;this.maxContainers=null;for(t in e)this.removeContainer(e[t]);this.rootNode.parentNode.removeChild(this.rootNode),this.rootNode=null,this.first=null,this.last=null},i["default"]=r,e.exports=i["default"]},{"./lib":3}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={init:function(t){var e=t.document,i=t.navigator,r=i.userAgent,s="DIV",o=Math.ceil,h=Math.floor,a="fusioncharts-smartlabel-",l=a+"container",d=a+"tag",g=a+"br";return n={win:t,containerClass:l,classNameWithTag:d,classNameWithTagBR:g,maxDefaultCacheLimit:1e3,classNameReg:new RegExp("\b"+d+"\b"),classNameBrReg:new RegExp("\b"+g+"\b"),spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+d+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+d+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),brRegex:new RegExp("({br[ ]*})|(<br[ ]*>)|(<br[ ]*/>)|(<BR[ ]*/>)|(<br\\>)","g"),ltgtRegex:/&lt;|&gt;/g,htmlSpecialEntityRegex:/&amp;|&quot;|&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function(){var i,n,s;return e.getElementsByClassName?(i="getElementsByClassName",n=d,s=!0):(i="getElementsByTagName",n="span",s=!1),{isIE:/msie/i.test(r)&&!t.opera,hasSVG:Boolean(t.SVGAngle||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(r),isWebKit:new RegExp(" AppleWebKit/").test(r),childRetriverFn:i,childRetriverString:n,noClassTesting:s}},createContainer:function(t){var i,n;if(t&&(t.offsetWidth||t.offsetHeight)){if(t.appendChild)return t.appendChild(n=e.createElement(s)),n.className=l,n.setAttribute("aria-hidden","true"),n.setAttribute("role","presentation"),n}else if(i=e.getElementsByTagName("body")[0],i&&i.appendChild)return n=e.createElement(s),n.className=l,n.setAttribute("aria-hidden","true"),n.setAttribute("role","presentation"),i.appendChild(n),n},getNearestBreakIndex:function(t,e,i){if(!t||!t.length)return 0;var n,r=i._getWidthFn(),s=0,a=0,l=r(t),d=l/t.length;if(n=e,s=o(e/d),l<e)return t.length-1;for(s>t.length&&(n=e-l,s=t.length);n>0;){if(n=e-r(t.substr(0,s)),a=h(n/d),!a)return s;s+=a}for(;n<0;){if(n=e-r(t.substr(0,s)),a=h(n/d),!a)return s;s+=a}return s},setLineHeight:function(t){var e=t.fontSize=t.fontSize||"12px";return t.lineHeight=t.lineHeight||t["line-height"]||1.2*parseInt(e,10)+"px",t},_getCleanHeight:function(t){return t=t.replace(/px/g,""),Number(t)},_getDimentionUsingDiv:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this._container;return t instanceof Array&&(t=t.join("")),e.innerHTML=t,{width:e.offsetWidth,height:e.offsetHeight}},_getDimentionUsingCanvas:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this,i=e.ctx,r=e.style,s=n._getCleanHeight(r.lineHeight);return t instanceof Array?(t=t.join(""),t=t.replace(/<br \/>/g,"")):t=t.replace(/<br \/>/g,""),{width:i.measureText(t).width,height:s}},_hasOnlyBRTag:function(){var t,e,i=arguments.length<=0||void 0===arguments[0]?"":arguments[0],r=i.replace(n.brRegex,"<br />"),s=r.split("<br />"),o=s.length,h=[];for(t=0;t<o;t++)if(n.xmlTagRegEx.test(s[t]))return!1;for(t=0,e=r.length;t<e;t++)if("<"===r[t]){if("<br />"!==r.substr(t,Math.min(6,e-t)))return!1;h.push(t)}return 0!==h.length&&h},_getDimentionOfMultiLineText:function(t,e){void 0===t&&(t="");var i,r,s,o=n._getTextArray(t),h=0,a=0,l=e._getWidthFn(),d=n._getCleanHeight(e.style.lineHeight),g=d,f={};for(i=0,r=o.length;i<r;i++)"<br />"===o[i]?(a=Math.max(a,h),h=0,g+=d):(s=l(o[i]),h+=s,f[o[i]]=s);return a=Math.max(a,h),{height:g,width:a,detailObj:f}},_getTextArray:function(){var t,e,i,n,r,s,o=arguments.length<=0||void 0===arguments[0]?"":arguments[0],h=[];for(r=o.split("<br />"),i=r.length,t=0;t<i;t++){for(s=r[t].split(""),n=s.length,e=0;e<n;e++)h.push(s[e]);t!==i-1&&h.push("<br />")}return h},_findLastIndex:function(t,e){void 0===t&&(t=[]);var i,n=t.length;for(i=n-1;i>=0;i--)if(t[i]===e)return i;return-1}}}};i["default"]=n,e.exports=i["default"]},{}]},{},[1])(1)});